{"dependencies":[{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-sqlite","data":{"asyncType":"async","isESMImport":true,"locs":[{"start":{"line":23,"column":19,"index":722},"end":{"line":23,"column":40,"index":743}}],"key":"bLFyjxic8WhG65qkqu+rGZQrp8A=","exportNames":["*"],"imports":1}},{"name":"expo/internal/async-require-module","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":23,"column":13,"index":716},"end":{"line":23,"column":40,"index":743}}],"key":"y8mhXL4zKvSVvgnacXXOn0UU+QQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"getDatabase\", {\n    enumerable: true,\n    get: function () {\n      return getDatabase;\n    }\n  });\n  Object.defineProperty(exports, \"resetDatabase\", {\n    enumerable: true,\n    get: function () {\n      return resetDatabase;\n    }\n  });\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[0], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  const DB_NAME = 'billkhata.db';\n  let db = null;\n  let SQLite = null;\n  const getDatabase = async () => {\n    // SQLite doesn't work on web, only on native platforms\n    if (Platform.default.OS === 'web') {\n      console.warn('SQLite is not supported on web. This app is designed for mobile devices (Android/iOS via Expo Go).');\n      // Return a mock database for web preview\n      return {\n        getAllAsync: async () => [],\n        getFirstAsync: async () => null,\n        runAsync: async () => ({\n          lastInsertRowId: 1,\n          changes: 0\n        }),\n        execAsync: async () => {}\n      };\n    }\n\n    // Dynamically import SQLite only on native platforms\n    if (!SQLite) {\n      SQLite = await require(_dependencyMap[2], \"expo/internal/async-require-module\")(_dependencyMap[1], _dependencyMap.paths, \"expo-sqlite\");\n    }\n    if (db) return db;\n    db = await SQLite.openDatabaseAsync(DB_NAME);\n    await initializeDatabase(db);\n    return db;\n  };\n  const initializeDatabase = async database => {\n    try {\n      // Create members table\n      await database.execAsync(`\n      CREATE TABLE IF NOT EXISTS members (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        name TEXT NOT NULL,\n        phone TEXT,\n        whatsapp TEXT,\n        facebook TEXT,\n        room_info TEXT,\n        avatar_base64 TEXT,\n        rent_amount REAL DEFAULT 0,\n        joined_date TEXT,\n        is_active INTEGER DEFAULT 1,\n        created_at TEXT DEFAULT CURRENT_TIMESTAMP\n      );\n    `);\n\n      // Create bills table\n      await database.execAsync(`\n      CREATE TABLE IF NOT EXISTS bills (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        category TEXT NOT NULL,\n        total_amount REAL NOT NULL,\n        bill_month TEXT,\n        due_date TEXT,\n        bill_date TEXT,\n        meter_reading TEXT,\n        notes TEXT,\n        photo_base64 TEXT,\n        split_type TEXT DEFAULT 'equal',\n        created_at TEXT DEFAULT CURRENT_TIMESTAMP\n      );\n    `);\n\n      // Create bill_assignments table\n      await database.execAsync(`\n      CREATE TABLE IF NOT EXISTS bill_assignments (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        bill_id INTEGER,\n        member_id INTEGER,\n        assigned_amount REAL NOT NULL,\n        is_paid INTEGER DEFAULT 0,\n        paid_date TEXT,\n        payment_method TEXT,\n        FOREIGN KEY (bill_id) REFERENCES bills(id),\n        FOREIGN KEY (member_id) REFERENCES members(id)\n      );\n    `);\n\n      // Create meals table\n      await database.execAsync(`\n      CREATE TABLE IF NOT EXISTS meals (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        member_id INTEGER,\n        meal_date TEXT NOT NULL,\n        breakfast REAL DEFAULT 0,\n        lunch REAL DEFAULT 0,\n        dinner REAL DEFAULT 0,\n        total_quantity REAL,\n        meal_rate REAL,\n        total_cost REAL,\n        is_finalized INTEGER DEFAULT 0,\n        notes TEXT,\n        FOREIGN KEY (member_id) REFERENCES members(id)\n      );\n    `);\n\n      // Create deposits table\n      await database.execAsync(`\n      CREATE TABLE IF NOT EXISTS deposits (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        member_id INTEGER,\n        amount REAL NOT NULL,\n        deposit_date TEXT,\n        payment_method TEXT,\n        transaction_id TEXT,\n        screenshot_base64 TEXT,\n        notes TEXT,\n        FOREIGN KEY (member_id) REFERENCES members(id)\n      );\n    `);\n\n      // Create shopping table\n      await database.execAsync(`\n      CREATE TABLE IF NOT EXISTS shopping (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        shopping_date TEXT NOT NULL,\n        amount REAL NOT NULL,\n        items TEXT,\n        receipt_base64 TEXT,\n        notes TEXT,\n        shopper_name TEXT\n      );\n    `);\n\n      // Create settings table\n      await database.execAsync(`\n      CREATE TABLE IF NOT EXISTS settings (\n        key TEXT PRIMARY KEY,\n        value TEXT\n      );\n    `);\n\n      // Insert default settings\n      await database.runAsync('INSERT OR IGNORE INTO settings (key, value) VALUES (?, ?)', ['room_name', 'My Room']);\n      await database.runAsync('INSERT OR IGNORE INTO settings (key, value) VALUES (?, ?)', ['currency', 'BDT']);\n      await database.runAsync('INSERT OR IGNORE INTO settings (key, value) VALUES (?, ?)', ['default_meal_quantity', '2']);\n      await database.runAsync('INSERT OR IGNORE INTO settings (key, value) VALUES (?, ?)', ['meal_rate_mode', 'auto']);\n      console.log('Database initialized successfully');\n    } catch (error) {\n      console.error('Database initialization error:', error);\n      throw error;\n    }\n  };\n  const resetDatabase = async () => {\n    const database = await getDatabase();\n    await database.execAsync(`\n    DROP TABLE IF EXISTS members;\n    DROP TABLE IF EXISTS bills;\n    DROP TABLE IF EXISTS bill_assignments;\n    DROP TABLE IF EXISTS meals;\n    DROP TABLE IF EXISTS deposits;\n    DROP TABLE IF EXISTS shopping;\n    DROP TABLE IF EXISTS settings;\n  `);\n    await initializeDatabase(database);\n  };\n});","lineCount":183,"map":[[12,2,8,0,"Object"],[12,8,8,0],[12,9,8,0,"defineProperty"],[12,23,8,0],[12,24,8,0,"exports"],[12,31,8,0],[13,4,8,0,"enumerable"],[13,14,8,0],[14,4,8,0,"get"],[14,7,8,0],[14,18,8,0,"get"],[14,19,8,0],[15,6,8,0],[15,13,8,0,"getDatabase"],[15,24,8,0],[16,4,8,0],[17,2,8,0],[18,2,163,0,"Object"],[18,8,163,0],[18,9,163,0,"defineProperty"],[18,23,163,0],[18,24,163,0,"exports"],[18,31,163,0],[19,4,163,0,"enumerable"],[19,14,163,0],[20,4,163,0,"get"],[20,7,163,0],[20,18,163,0,"get"],[20,19,163,0],[21,6,163,0],[21,13,163,0,"resetDatabase"],[21,26,163,0],[22,4,163,0],[23,2,163,0],[24,2,177,2],[24,6,177,2,"_reactNativeWebDistExportsPlatform"],[24,40,177,2],[24,43,177,2,"require"],[24,50,177,2],[24,51,177,2,"_dependencyMap"],[24,65,177,2],[25,2,177,2],[25,6,177,2,"Platform"],[25,14,177,2],[25,17,177,2,"_interopDefault"],[25,32,177,2],[25,33,177,2,"_reactNativeWebDistExportsPlatform"],[25,67,177,2],[26,2,3,0],[26,8,3,6,"DB_NAME"],[26,15,3,13],[26,18,3,16],[26,32,3,30],[27,2,5,0],[27,6,5,4,"db"],[27,8,5,11],[27,11,5,14],[27,15,5,18],[28,2,6,0],[28,6,6,4,"SQLite"],[28,12,6,15],[28,15,6,18],[28,19,6,22],[29,2,8,7],[29,8,8,13,"getDatabase"],[29,19,8,24],[29,22,8,27],[29,28,8,27,"getDatabase"],[29,29,8,27],[29,34,8,53],[30,4,9,2],[31,4,10,2],[31,8,10,6,"Platform"],[31,16,10,14],[31,17,10,14,"default"],[31,24,10,14],[31,25,10,15,"OS"],[31,27,10,17],[31,32,10,22],[31,37,10,27],[31,39,10,29],[32,6,11,4,"console"],[32,13,11,11],[32,14,11,12,"warn"],[32,18,11,16],[32,19,11,17],[32,119,11,117],[32,120,11,118],[33,6,12,4],[34,6,13,4],[34,13,13,11],[35,8,14,6,"getAllAsync"],[35,19,14,17],[35,21,14,19],[35,27,14,19,"getAllAsync"],[35,28,14,19],[35,33,14,31],[35,35,14,33],[36,8,15,6,"getFirstAsync"],[36,21,15,19],[36,23,15,21],[36,29,15,21,"getFirstAsync"],[36,30,15,21],[36,35,15,33],[36,39,15,37],[37,8,16,6,"runAsync"],[37,16,16,14],[37,18,16,16],[37,24,16,16,"runAsync"],[37,25,16,16],[37,31,16,29],[38,10,16,31,"lastInsertRowId"],[38,25,16,46],[38,27,16,48],[38,28,16,49],[39,10,16,51,"changes"],[39,17,16,58],[39,19,16,60],[40,8,16,62],[40,9,16,63],[40,10,16,64],[41,8,17,6,"execAsync"],[41,17,17,15],[41,19,17,17],[41,25,17,17,"execAsync"],[41,26,17,17],[41,31,17,29],[41,32,17,30],[42,6,18,4],[42,7,18,5],[43,4,19,2],[45,4,21,2],[46,4,22,2],[46,8,22,6],[46,9,22,7,"SQLite"],[46,15,22,13],[46,17,22,15],[47,6,23,4,"SQLite"],[47,12,23,10],[47,15,23,13],[47,21,23,13,"require"],[47,28,23,13],[47,29,23,13,"_dependencyMap"],[47,43,23,13],[47,86,23,13,"_dependencyMap"],[47,100,23,13],[47,105,23,13,"_dependencyMap"],[47,119,23,13],[47,120,23,13,"paths"],[47,125,23,13],[47,141,23,40],[48,4,24,2],[49,4,26,2],[49,8,26,6,"db"],[49,10,26,8],[49,12,26,10],[49,19,26,17,"db"],[49,21,26,19],[50,4,28,2,"db"],[50,6,28,4],[50,9,28,7],[50,15,28,13,"SQLite"],[50,21,28,19],[50,22,28,20,"openDatabaseAsync"],[50,39,28,37],[50,40,28,38,"DB_NAME"],[50,47,28,45],[50,48,28,46],[51,4,29,2],[51,10,29,8,"initializeDatabase"],[51,28,29,26],[51,29,29,27,"db"],[51,31,29,29],[51,32,29,30],[52,4,30,2],[52,11,30,9,"db"],[52,13,30,11],[53,2,31,0],[53,3,31,1],[54,2,33,0],[54,8,33,6,"initializeDatabase"],[54,26,33,24],[54,29,33,27],[54,35,33,34,"database"],[54,43,33,65],[54,47,33,70],[55,4,34,2],[55,8,34,6],[56,6,35,4],[57,6,36,4],[57,12,36,10,"database"],[57,20,36,18],[57,21,36,19,"execAsync"],[57,30,36,28],[57,31,36,29],[58,0,37,0],[59,0,38,0],[60,0,39,0],[61,0,40,0],[62,0,41,0],[63,0,42,0],[64,0,43,0],[65,0,44,0],[66,0,45,0],[67,0,46,0],[68,0,47,0],[69,0,48,0],[70,0,49,0],[71,0,50,0],[71,5,50,5],[71,6,50,6],[73,6,52,4],[74,6,53,4],[74,12,53,10,"database"],[74,20,53,18],[74,21,53,19,"execAsync"],[74,30,53,28],[74,31,53,29],[75,0,54,0],[76,0,55,0],[77,0,56,0],[78,0,57,0],[79,0,58,0],[80,0,59,0],[81,0,60,0],[82,0,61,0],[83,0,62,0],[84,0,63,0],[85,0,64,0],[86,0,65,0],[87,0,66,0],[88,0,67,0],[88,5,67,5],[88,6,67,6],[90,6,69,4],[91,6,70,4],[91,12,70,10,"database"],[91,20,70,18],[91,21,70,19,"execAsync"],[91,30,70,28],[91,31,70,29],[92,0,71,0],[93,0,72,0],[94,0,73,0],[95,0,74,0],[96,0,75,0],[97,0,76,0],[98,0,77,0],[99,0,78,0],[100,0,79,0],[101,0,80,0],[102,0,81,0],[103,0,82,0],[103,5,82,5],[103,6,82,6],[105,6,84,4],[106,6,85,4],[106,12,85,10,"database"],[106,20,85,18],[106,21,85,19,"execAsync"],[106,30,85,28],[106,31,85,29],[107,0,86,0],[108,0,87,0],[109,0,88,0],[110,0,89,0],[111,0,90,0],[112,0,91,0],[113,0,92,0],[114,0,93,0],[115,0,94,0],[116,0,95,0],[117,0,96,0],[118,0,97,0],[119,0,98,0],[120,0,99,0],[121,0,100,0],[121,5,100,5],[121,6,100,6],[123,6,102,4],[124,6,103,4],[124,12,103,10,"database"],[124,20,103,18],[124,21,103,19,"execAsync"],[124,30,103,28],[124,31,103,29],[125,0,104,0],[126,0,105,0],[127,0,106,0],[128,0,107,0],[129,0,108,0],[130,0,109,0],[131,0,110,0],[132,0,111,0],[133,0,112,0],[134,0,113,0],[135,0,114,0],[136,0,115,0],[136,5,115,5],[136,6,115,6],[138,6,117,4],[139,6,118,4],[139,12,118,10,"database"],[139,20,118,18],[139,21,118,19,"execAsync"],[139,30,118,28],[139,31,118,29],[140,0,119,0],[141,0,120,0],[142,0,121,0],[143,0,122,0],[144,0,123,0],[145,0,124,0],[146,0,125,0],[147,0,126,0],[148,0,127,0],[149,0,128,0],[149,5,128,5],[149,6,128,6],[151,6,130,4],[152,6,131,4],[152,12,131,10,"database"],[152,20,131,18],[152,21,131,19,"execAsync"],[152,30,131,28],[152,31,131,29],[153,0,132,0],[154,0,133,0],[155,0,134,0],[156,0,135,0],[157,0,136,0],[157,5,136,5],[157,6,136,6],[159,6,138,4],[160,6,139,4],[160,12,139,10,"database"],[160,20,139,18],[160,21,139,19,"runAsync"],[160,29,139,27],[160,30,140,6],[160,89,140,65],[160,91,141,6],[160,92,141,7],[160,103,141,18],[160,105,141,20],[160,114,141,29],[160,115,142,4],[160,116,142,5],[161,6,143,4],[161,12,143,10,"database"],[161,20,143,18],[161,21,143,19,"runAsync"],[161,29,143,27],[161,30,144,6],[161,89,144,65],[161,91,145,6],[161,92,145,7],[161,102,145,17],[161,104,145,19],[161,109,145,24],[161,110,146,4],[161,111,146,5],[162,6,147,4],[162,12,147,10,"database"],[162,20,147,18],[162,21,147,19,"runAsync"],[162,29,147,27],[162,30,148,6],[162,89,148,65],[162,91,149,6],[162,92,149,7],[162,115,149,30],[162,117,149,32],[162,120,149,35],[162,121,150,4],[162,122,150,5],[163,6,151,4],[163,12,151,10,"database"],[163,20,151,18],[163,21,151,19,"runAsync"],[163,29,151,27],[163,30,152,6],[163,89,152,65],[163,91,153,6],[163,92,153,7],[163,108,153,23],[163,110,153,25],[163,116,153,31],[163,117,154,4],[163,118,154,5],[164,6,156,4,"console"],[164,13,156,11],[164,14,156,12,"log"],[164,17,156,15],[164,18,156,16],[164,53,156,51],[164,54,156,52],[165,4,157,2],[165,5,157,3],[165,6,157,4],[165,13,157,11,"error"],[165,18,157,16],[165,20,157,18],[166,6,158,4,"console"],[166,13,158,11],[166,14,158,12,"error"],[166,19,158,17],[166,20,158,18],[166,52,158,50],[166,54,158,52,"error"],[166,59,158,57],[166,60,158,58],[167,6,159,4],[167,12,159,10,"error"],[167,17,159,15],[168,4,160,2],[169,2,161,0],[169,3,161,1],[170,2,163,7],[170,8,163,13,"resetDatabase"],[170,21,163,26],[170,24,163,29],[170,30,163,29,"resetDatabase"],[170,31,163,29],[170,36,163,41],[171,4,164,2],[171,10,164,8,"database"],[171,18,164,16],[171,21,164,19],[171,27,164,25,"getDatabase"],[171,38,164,36],[171,39,164,37],[171,40,164,38],[172,4,166,2],[172,10,166,8,"database"],[172,18,166,16],[172,19,166,17,"execAsync"],[172,28,166,26],[172,29,166,27],[173,0,167,0],[174,0,168,0],[175,0,169,0],[176,0,170,0],[177,0,171,0],[178,0,172,0],[179,0,173,0],[180,0,174,0],[180,3,174,3],[180,4,174,4],[181,4,176,2],[181,10,176,8,"initializeDatabase"],[181,28,176,26],[181,29,176,27,"database"],[181,37,176,35],[181,38,176,36],[182,2,177,0],[182,3,177,1],[183,0,177,2],[183,3]],"functionMap":{"names":["<global>","getDatabase","getAllAsync","getFirstAsync","runAsync","execAsync","initializeDatabase","resetDatabase"],"mappings":"AAA;2BCO;mBCM,cD;qBEC,gBF;gBGC,gDH;iBIC,cJ;CDc;2BME;CNgI;6BOE;CPc"},"hasCjsExports":false},"type":"js/module"}]}
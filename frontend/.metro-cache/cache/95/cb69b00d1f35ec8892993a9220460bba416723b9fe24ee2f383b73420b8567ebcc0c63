{"dependencies":[{"name":"expo-sqlite","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":38,"index":38}}],"key":"QiSBWdXsWfNLYLVy2O3EksR8vJg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"getDatabase\", {\n    enumerable: true,\n    get: function () {\n      return getDatabase;\n    }\n  });\n  Object.defineProperty(exports, \"resetDatabase\", {\n    enumerable: true,\n    get: function () {\n      return resetDatabase;\n    }\n  });\n  var _expoSqlite = require(_dependencyMap[0], \"expo-sqlite\");\n  var SQLite = _interopNamespace(_expoSqlite);\n  const DB_NAME = 'billkhata.db';\n  let db = null;\n  const getDatabase = async () => {\n    if (db) return db;\n    db = await SQLite.openDatabaseAsync(DB_NAME);\n    await initializeDatabase(db);\n    return db;\n  };\n  const initializeDatabase = async database => {\n    try {\n      // Create members table\n      await database.execAsync(`\n      CREATE TABLE IF NOT EXISTS members (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        name TEXT NOT NULL,\n        phone TEXT,\n        whatsapp TEXT,\n        facebook TEXT,\n        room_info TEXT,\n        avatar_base64 TEXT,\n        rent_amount REAL DEFAULT 0,\n        joined_date TEXT,\n        is_active INTEGER DEFAULT 1,\n        created_at TEXT DEFAULT CURRENT_TIMESTAMP\n      );\n    `);\n\n      // Create bills table\n      await database.execAsync(`\n      CREATE TABLE IF NOT EXISTS bills (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        category TEXT NOT NULL,\n        total_amount REAL NOT NULL,\n        bill_month TEXT,\n        due_date TEXT,\n        bill_date TEXT,\n        meter_reading TEXT,\n        notes TEXT,\n        photo_base64 TEXT,\n        split_type TEXT DEFAULT 'equal',\n        created_at TEXT DEFAULT CURRENT_TIMESTAMP\n      );\n    `);\n\n      // Create bill_assignments table\n      await database.execAsync(`\n      CREATE TABLE IF NOT EXISTS bill_assignments (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        bill_id INTEGER,\n        member_id INTEGER,\n        assigned_amount REAL NOT NULL,\n        is_paid INTEGER DEFAULT 0,\n        paid_date TEXT,\n        payment_method TEXT,\n        FOREIGN KEY (bill_id) REFERENCES bills(id),\n        FOREIGN KEY (member_id) REFERENCES members(id)\n      );\n    `);\n\n      // Create meals table\n      await database.execAsync(`\n      CREATE TABLE IF NOT EXISTS meals (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        member_id INTEGER,\n        meal_date TEXT NOT NULL,\n        breakfast REAL DEFAULT 0,\n        lunch REAL DEFAULT 0,\n        dinner REAL DEFAULT 0,\n        total_quantity REAL,\n        meal_rate REAL,\n        total_cost REAL,\n        is_finalized INTEGER DEFAULT 0,\n        notes TEXT,\n        FOREIGN KEY (member_id) REFERENCES members(id)\n      );\n    `);\n\n      // Create deposits table\n      await database.execAsync(`\n      CREATE TABLE IF NOT EXISTS deposits (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        member_id INTEGER,\n        amount REAL NOT NULL,\n        deposit_date TEXT,\n        payment_method TEXT,\n        transaction_id TEXT,\n        screenshot_base64 TEXT,\n        notes TEXT,\n        FOREIGN KEY (member_id) REFERENCES members(id)\n      );\n    `);\n\n      // Create shopping table\n      await database.execAsync(`\n      CREATE TABLE IF NOT EXISTS shopping (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        shopping_date TEXT NOT NULL,\n        amount REAL NOT NULL,\n        items TEXT,\n        receipt_base64 TEXT,\n        notes TEXT,\n        shopper_name TEXT\n      );\n    `);\n\n      // Create settings table\n      await database.execAsync(`\n      CREATE TABLE IF NOT EXISTS settings (\n        key TEXT PRIMARY KEY,\n        value TEXT\n      );\n    `);\n\n      // Insert default settings\n      await database.runAsync('INSERT OR IGNORE INTO settings (key, value) VALUES (?, ?)', ['room_name', 'My Room']);\n      await database.runAsync('INSERT OR IGNORE INTO settings (key, value) VALUES (?, ?)', ['currency', 'BDT']);\n      await database.runAsync('INSERT OR IGNORE INTO settings (key, value) VALUES (?, ?)', ['default_meal_quantity', '2']);\n      await database.runAsync('INSERT OR IGNORE INTO settings (key, value) VALUES (?, ?)', ['meal_rate_mode', 'auto']);\n      console.log('Database initialized successfully');\n    } catch (error) {\n      console.error('Database initialization error:', error);\n      throw error;\n    }\n  };\n  const resetDatabase = async () => {\n    const database = await getDatabase();\n    await database.execAsync(`\n    DROP TABLE IF EXISTS members;\n    DROP TABLE IF EXISTS bills;\n    DROP TABLE IF EXISTS bill_assignments;\n    DROP TABLE IF EXISTS meals;\n    DROP TABLE IF EXISTS deposits;\n    DROP TABLE IF EXISTS shopping;\n    DROP TABLE IF EXISTS settings;\n  `);\n    await initializeDatabase(database);\n  };\n});","lineCount":173,"map":[[22,2,7,0,"Object"],[22,8,7,0],[22,9,7,0,"defineProperty"],[22,23,7,0],[22,24,7,0,"exports"],[22,31,7,0],[23,4,7,0,"enumerable"],[23,14,7,0],[24,4,7,0,"get"],[24,7,7,0],[24,18,7,0,"get"],[24,19,7,0],[25,6,7,0],[25,13,7,0,"getDatabase"],[25,24,7,0],[26,4,7,0],[27,2,7,0],[28,2,145,0,"Object"],[28,8,145,0],[28,9,145,0,"defineProperty"],[28,23,145,0],[28,24,145,0,"exports"],[28,31,145,0],[29,4,145,0,"enumerable"],[29,14,145,0],[30,4,145,0,"get"],[30,7,145,0],[30,18,145,0,"get"],[30,19,145,0],[31,6,145,0],[31,13,145,0,"resetDatabase"],[31,26,145,0],[32,4,145,0],[33,2,145,0],[34,2,1,0],[34,6,1,0,"_expoSqlite"],[34,17,1,0],[34,20,1,0,"require"],[34,27,1,0],[34,28,1,0,"_dependencyMap"],[34,42,1,0],[35,2,1,0],[35,6,1,0,"SQLite"],[35,12,1,0],[35,15,1,0,"_interopNamespace"],[35,32,1,0],[35,33,1,0,"_expoSqlite"],[35,44,1,0],[36,2,3,0],[36,8,3,6,"DB_NAME"],[36,15,3,13],[36,18,3,16],[36,32,3,30],[37,2,5,0],[37,6,5,4,"db"],[37,8,5,36],[37,11,5,39],[37,15,5,43],[38,2,7,7],[38,8,7,13,"getDatabase"],[38,19,7,24],[38,22,7,27],[38,28,7,27,"getDatabase"],[38,29,7,27],[38,34,7,71],[39,4,8,2],[39,8,8,6,"db"],[39,10,8,8],[39,12,8,10],[39,19,8,17,"db"],[39,21,8,19],[40,4,10,2,"db"],[40,6,10,4],[40,9,10,7],[40,15,10,13,"SQLite"],[40,21,10,19],[40,22,10,20,"openDatabaseAsync"],[40,39,10,37],[40,40,10,38,"DB_NAME"],[40,47,10,45],[40,48,10,46],[41,4,11,2],[41,10,11,8,"initializeDatabase"],[41,28,11,26],[41,29,11,27,"db"],[41,31,11,29],[41,32,11,30],[42,4,12,2],[42,11,12,9,"db"],[42,13,12,11],[43,2,13,0],[43,3,13,1],[44,2,15,0],[44,8,15,6,"initializeDatabase"],[44,26,15,24],[44,29,15,27],[44,35,15,34,"database"],[44,43,15,65],[44,47,15,70],[45,4,16,2],[45,8,16,6],[46,6,17,4],[47,6,18,4],[47,12,18,10,"database"],[47,20,18,18],[47,21,18,19,"execAsync"],[47,30,18,28],[47,31,18,29],[48,0,19,0],[49,0,20,0],[50,0,21,0],[51,0,22,0],[52,0,23,0],[53,0,24,0],[54,0,25,0],[55,0,26,0],[56,0,27,0],[57,0,28,0],[58,0,29,0],[59,0,30,0],[60,0,31,0],[61,0,32,0],[61,5,32,5],[61,6,32,6],[63,6,34,4],[64,6,35,4],[64,12,35,10,"database"],[64,20,35,18],[64,21,35,19,"execAsync"],[64,30,35,28],[64,31,35,29],[65,0,36,0],[66,0,37,0],[67,0,38,0],[68,0,39,0],[69,0,40,0],[70,0,41,0],[71,0,42,0],[72,0,43,0],[73,0,44,0],[74,0,45,0],[75,0,46,0],[76,0,47,0],[77,0,48,0],[78,0,49,0],[78,5,49,5],[78,6,49,6],[80,6,51,4],[81,6,52,4],[81,12,52,10,"database"],[81,20,52,18],[81,21,52,19,"execAsync"],[81,30,52,28],[81,31,52,29],[82,0,53,0],[83,0,54,0],[84,0,55,0],[85,0,56,0],[86,0,57,0],[87,0,58,0],[88,0,59,0],[89,0,60,0],[90,0,61,0],[91,0,62,0],[92,0,63,0],[93,0,64,0],[93,5,64,5],[93,6,64,6],[95,6,66,4],[96,6,67,4],[96,12,67,10,"database"],[96,20,67,18],[96,21,67,19,"execAsync"],[96,30,67,28],[96,31,67,29],[97,0,68,0],[98,0,69,0],[99,0,70,0],[100,0,71,0],[101,0,72,0],[102,0,73,0],[103,0,74,0],[104,0,75,0],[105,0,76,0],[106,0,77,0],[107,0,78,0],[108,0,79,0],[109,0,80,0],[110,0,81,0],[111,0,82,0],[111,5,82,5],[111,6,82,6],[113,6,84,4],[114,6,85,4],[114,12,85,10,"database"],[114,20,85,18],[114,21,85,19,"execAsync"],[114,30,85,28],[114,31,85,29],[115,0,86,0],[116,0,87,0],[117,0,88,0],[118,0,89,0],[119,0,90,0],[120,0,91,0],[121,0,92,0],[122,0,93,0],[123,0,94,0],[124,0,95,0],[125,0,96,0],[126,0,97,0],[126,5,97,5],[126,6,97,6],[128,6,99,4],[129,6,100,4],[129,12,100,10,"database"],[129,20,100,18],[129,21,100,19,"execAsync"],[129,30,100,28],[129,31,100,29],[130,0,101,0],[131,0,102,0],[132,0,103,0],[133,0,104,0],[134,0,105,0],[135,0,106,0],[136,0,107,0],[137,0,108,0],[138,0,109,0],[139,0,110,0],[139,5,110,5],[139,6,110,6],[141,6,112,4],[142,6,113,4],[142,12,113,10,"database"],[142,20,113,18],[142,21,113,19,"execAsync"],[142,30,113,28],[142,31,113,29],[143,0,114,0],[144,0,115,0],[145,0,116,0],[146,0,117,0],[147,0,118,0],[147,5,118,5],[147,6,118,6],[149,6,120,4],[150,6,121,4],[150,12,121,10,"database"],[150,20,121,18],[150,21,121,19,"runAsync"],[150,29,121,27],[150,30,122,6],[150,89,122,65],[150,91,123,6],[150,92,123,7],[150,103,123,18],[150,105,123,20],[150,114,123,29],[150,115,124,4],[150,116,124,5],[151,6,125,4],[151,12,125,10,"database"],[151,20,125,18],[151,21,125,19,"runAsync"],[151,29,125,27],[151,30,126,6],[151,89,126,65],[151,91,127,6],[151,92,127,7],[151,102,127,17],[151,104,127,19],[151,109,127,24],[151,110,128,4],[151,111,128,5],[152,6,129,4],[152,12,129,10,"database"],[152,20,129,18],[152,21,129,19,"runAsync"],[152,29,129,27],[152,30,130,6],[152,89,130,65],[152,91,131,6],[152,92,131,7],[152,115,131,30],[152,117,131,32],[152,120,131,35],[152,121,132,4],[152,122,132,5],[153,6,133,4],[153,12,133,10,"database"],[153,20,133,18],[153,21,133,19,"runAsync"],[153,29,133,27],[153,30,134,6],[153,89,134,65],[153,91,135,6],[153,92,135,7],[153,108,135,23],[153,110,135,25],[153,116,135,31],[153,117,136,4],[153,118,136,5],[154,6,138,4,"console"],[154,13,138,11],[154,14,138,12,"log"],[154,17,138,15],[154,18,138,16],[154,53,138,51],[154,54,138,52],[155,4,139,2],[155,5,139,3],[155,6,139,4],[155,13,139,11,"error"],[155,18,139,16],[155,20,139,18],[156,6,140,4,"console"],[156,13,140,11],[156,14,140,12,"error"],[156,19,140,17],[156,20,140,18],[156,52,140,50],[156,54,140,52,"error"],[156,59,140,57],[156,60,140,58],[157,6,141,4],[157,12,141,10,"error"],[157,17,141,15],[158,4,142,2],[159,2,143,0],[159,3,143,1],[160,2,145,7],[160,8,145,13,"resetDatabase"],[160,21,145,26],[160,24,145,29],[160,30,145,29,"resetDatabase"],[160,31,145,29],[160,36,145,41],[161,4,146,2],[161,10,146,8,"database"],[161,18,146,16],[161,21,146,19],[161,27,146,25,"getDatabase"],[161,38,146,36],[161,39,146,37],[161,40,146,38],[162,4,148,2],[162,10,148,8,"database"],[162,18,148,16],[162,19,148,17,"execAsync"],[162,28,148,26],[162,29,148,27],[163,0,149,0],[164,0,150,0],[165,0,151,0],[166,0,152,0],[167,0,153,0],[168,0,154,0],[169,0,155,0],[170,0,156,0],[170,3,156,3],[170,4,156,4],[171,4,158,2],[171,10,158,8,"initializeDatabase"],[171,28,158,26],[171,29,158,27,"database"],[171,37,158,35],[171,38,158,36],[172,2,159,0],[172,3,159,1],[173,0,159,2],[173,3]],"functionMap":{"names":["<global>","getDatabase","initializeDatabase","resetDatabase"],"mappings":"AAA;2BCM;CDM;2BEE;CFgI;6BGE;CHc"},"hasCjsExports":false},"type":"js/module"}]}